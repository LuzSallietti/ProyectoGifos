<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://kit.fontawesome.com/2b49350120.js"
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
      }
      .box {
        height: 100px;
        width: 100px;
        border: 1px solid grey;
        margin: 25px;
      }
      .box > img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .hidden {
        visibility: hidden;
      }
      .visible {
        visibility: visible;
      }
    </style>
  </head>
  <body>
    <i class="fas fa-chevron-left hidden" id="back-arrow"></i>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <i class="fas fa-chevron-right visible" id="forward-arrow"></i>
  </body>
  <script>
    let body = document.getElementsByTagName("body");

    let results = [];

    //llamar a giphy trends

    let url =
      "https://api.giphy.com/v1/gifs/trending?api_key=ZKclmP8V3fhuu7RAjeaGJ7XdNzu28bef&limit=48";
    async function busqueda() {
      let response = await fetch(url);
      let JSON = await response.json();
      let data = JSON.data;

      return data;
    }
    busqueda()
      .then((response) => {
        results = response;
        displayResults();
      }) //asigno el resultado a una variable/array para manipularla
      .catch((error) => console.log(error));

    //mostrar primeros 3
    let back_arrow = document.getElementById("back-arrow");
    let forward_arow = document.getElementById("forward-arrow");
    let contador = 0;
    let boxes = document.getElementsByClassName("box");

    function displayResults() {
      for (i = 0; i < 3; i++) {
        console.log(`i vale ${i} y contador vale ${contador}`);
        let GIFO = results[contador].images.fixed_height_small_still.url;
        let img_tag = document.createElement("img");
        img_tag.setAttribute("src", `${GIFO}`);
        boxes[i].appendChild(img_tag);
        contador = contador + 1;
      }
    }

    //mostrar 3 nuevos (avanzar)

    forward_arow.addEventListener("click", goFoward);

    function goFoward() {
      back_arrow.classList.replace("hidden", "visible");

      for (i = 0; i < 3; i++) {
        if (contador >= 44) {
          forward_arow.classList.replace("visible", "hidden");
        }
        console.log(`i vale ${i} y contador vale ${contador}`);
        let GIFO = results[contador].images.original.url;
        boxes[i].innerHTML = `<img src=${GIFO}>`;
        contador = contador + 1;
      }
    }

    //mostrar 3 anteriores (retroceder)

    back_arrow.addEventListener("click", goBack);

    function goBack() {
      if (contador > 0) {
        console.log("Estoy restando el contador, que vale " + contador);
        contador = contador - 6;
        for (i = 0; i < 3; i++) {
          if (contador == 0) {
          back_arrow.classList.replace("visible", "hidden");
        }

          console.log(`i vale ${i} y contador vale ${contador}`);
          let GIFO = results[contador].images.original.url;
          boxes[i].innerHTML = `<img src=${GIFO}>`;
          contador = contador + 1;
        }
      } 
        
      
    }
  </script>
</html>
